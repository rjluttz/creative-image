(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3518:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>n});var s=l(5155),t=l(2115);function r(e){let{onProcess:a,isProcessing:l}=e,[r,n]=(0,t.useState)(""),[i,o]=(0,t.useState)(null),d=(0,t.useRef)(null),[c,u]=(0,t.useState)(null);return(0,s.jsxs)("form",{className:"flex flex-col gap-4 w-full max-w-md",onSubmit:function(e){e.preventDefault(),c&&r&&a(c,r)},children:[(0,s.jsx)("input",{type:"file",accept:"image/*",ref:d,onChange:function(e){var a;let l=null==(a=e.target.files)?void 0:a[0];l&&(u(l),o(URL.createObjectURL(l)))},disabled:l,className:"border p-2 rounded"}),i&&(0,s.jsx)("img",{src:i,alt:"Preview",className:"w-full max-h-64 object-contain rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Describe your new background...",value:r,onChange:e=>n(e.target.value),disabled:l,className:"border p-2 rounded"}),(0,s.jsx)("button",{type:"submit",disabled:!c||!r||l,className:"bg-blue-600 text-white rounded p-2 disabled:opacity-50",children:l?"Processing...":"Update Background"})]})}function n(){let[e,a]=(0,t.useState)(null),[l,n]=(0,t.useState)(null),[i,o]=(0,t.useState)(!1),[d,c]=(0,t.useState)(null);async function u(e,l){o(!0),c(null),a(null),n(null);try{n(URL.createObjectURL(e));let s=new FormData;s.append("file",e),s.append("prompt",l);let t=await fetch("/api/background",{method:"POST",body:s});if((t.headers.get("content-type")||"").includes("application/json")){let e=(await t.json()).error||"Failed to process image";e.includes("rembg")?e+="\nPossible reasons: rembg model is sleeping, unavailable, or rate-limited. Try again later or use a different segmentation model.":e.includes("background")?e+="\nPossible reasons: background generation model is sleeping, unavailable, or rate-limited. Try again later or use a different text-to-image model.":e+="\nIf this persists, check your Hugging Face API key, model status, or try a smaller image.",c(e);return}if(!t.ok)return void c("Failed to process image");let r=await t.blob();a(URL.createObjectURL(r))}catch(e){c(e instanceof Error?e.message:"Unknown error")}finally{o(!1)}}return(0,s.jsxs)("div",{className:"flex flex-col items-center min-h-screen p-8 gap-8 bg-gradient-to-br from-gray-50 to-blue-100",children:[(0,s.jsx)("h1",{className:"text-4xl font-extrabold mb-6 text-blue-700 drop-shadow",children:"Creative Image Background Updater"}),(0,s.jsxs)("div",{className:"w-full max-w-xl bg-white rounded-xl shadow-lg p-8 flex flex-col gap-6",children:[(0,s.jsx)(r,{onProcess:u,isProcessing:i}),d&&(0,s.jsx)("div",{className:"text-red-600 font-medium whitespace-pre-line bg-red-50 border border-red-200 rounded p-3",children:d}),(l||e)&&(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center gap-8 mt-4",children:[l&&(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-gray-500 mb-2",children:"Original"}),(0,s.jsx)("img",{src:l,alt:"Original",className:"rounded-lg shadow-md max-w-xs max-h-80 border border-gray-200"})]}),e&&(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-blue-600 mb-2 font-semibold",children:"Result"}),(0,s.jsx)("img",{src:e,alt:"Result",className:"rounded-lg shadow-md max-w-xs max-h-80 border-2 border-blue-300"})]})]})]}),(0,s.jsxs)("footer",{className:"mt-10 text-gray-400 text-sm",children:["\xa9 ",new Date().getFullYear()," Creative Image App"]})]})}},4442:(e,a,l)=>{Promise.resolve().then(l.bind(l,3518))}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(4442)),_N_E=e.O()}]);